@using MMi_BIS_PA.Models
<style>
    .bg-success {
        color: #FFFFFF;
        font-weight: bold;
        text-align: center;
    }

    .fail {
        color: #FFFFFF;
        background-color: #F53B3B;
        font-weight: bold;
        text-align: center;
    }

    .center {
        text-align: center;
    }
</style>

@{float diff = 0, st = 0;
    <div class="container-fluid">
        <div class="card shadow mb-3" style="width: 100%; height:65%">
            <div class="card-header" style="padding:0;background-color:#004883; height:50px">
                <div style="float:left; padding:12px 20px 12px 20px; font-weight:bold; color:#fff; height:100%; width:25%;">Date : @DateTime.Now.Date.ToShortDateString()</div>
                <div id="jobCount">@Html.Partial("_totalCurrentJobCount") @*@{ Html.RenderAction("UpdateTotalCurrentShiftJobCount");}*@ </div>
                <div style="float:left; font-weight:bold; color:#fff; height:100%; width:25%;"></div>

                <div style="padding: 12px 20px 12px 20px; float:left; text-align:right; font-weight :bold; color:#fff; height:100%; width:25%;">Time : @DateTime.Now.ToString("hh:mm tt")</div>

            </div>
            <div class="card-body">
                <div class="container-fluid">
                    <div class="row" style="height:100%">
                        <div id="dataCard" class="col-8" style="height:100%;">
                            @{ Html.RenderAction("UpdateTable");}
                        </div>
                        <div id="piechart" class="col-4" style="height:100%; background-color:">

                            @Html.Partial("_PieChart")
                            
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>

}





@{
    var pieData = ViewBag.pieData;
}




<script>
    //let myChart = document.getElementById('myChart').getContext('2d');
    $(document).ready(function () {
        //alert("executed")
       updateChart();
    });


     function updateChart() {
        // console.log("inside update chart");
        //massPopChart.destroy();
        massPopChart.data.datasets[0].data = [
           @pieData.clip1,
           @pieData.clip2,
           @pieData.ring,
           @pieData.weight,
           @pieData.TotalSuccessfulCycles
            //12,11,21,31,200

         ];
         // console.dir(massPopChart);
         console.log("");
        console.log(@pieData.clip1);
        console.log(@pieData.clip2);
        console.log(@pieData.ring);
        console.log(@pieData.weight);
        console.log(@pieData.TotalSuccessfulCycles);
         massPopChart.update();

    }



    $(document).ready(function () {

        $('#updatePie').click(function () {
            updateChart();
        });
    });


</script>
